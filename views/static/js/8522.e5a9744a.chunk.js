"use strict";(self.webpackChunksubdomaine=self.webpackChunksubdomaine||[]).push([[8522],{57253:function(e,t,r){r.r(t),r.d(t,{default:function(){return q}});var n=r(29439),i=r(72791),o=r(88749),a=r(41971),s=r(51695),l=r(42953),c=(r(43360),r(99410)),d=r(74292),u=r(45279),m=r(46387),h=r(74569),p=r.n(h),f=r(89743),x=r(2677),v=r(59151),g=r(3637),j=r(2002),b=(r(98472),r(36161)),y=r(92746),Z=(r(1235),r(58826)),N=r(64802),_=r(58484),A=r(74387),C=r(627),k=(r(71628),r(72426)),S=r.n(k),E=(r(55705),r(76863)),w=r(80184);r(24245),E.Ry().shape({email:E.Z_().email("Invalid Email").required("Email is Required"),phone_number:E.Z_().matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"Phone number is not valid").required("Phone is Required"),city:E.Z_().min(2,"City is Too Short!").max(20,"City is Too Long!").required("City is Required"),description:E.Z_().min(2,"description is Too Short!").max(20,"description is Too Long!").required("description is Required"),name:E.Z_().min(2,"name is Too Short!").max(20,"name is Too Long!").required("name is Required"),code:E.Z_().min(2,"code is Too Short!").max(20,"code is Too Long!").required("code is Required")});var F=r(24245)();var q=function(){var e=(0,i.useState)([]),t=(0,n.Z)(e,2),r=t[0],h=t[1],k=(0,i.useState)({display:!1,type:"success",message:null}),E=(0,n.Z)(k,2),q=E[0],T=(E[1],(0,i.useState)([])),z=(0,n.Z)(T,2),P=z[0],R=z[1];function D(e,t,r){var n=r.sortElement,i=r.filterElement;return(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[i,e.text,n,(0,w.jsx)("span",{className:"fa fa-filter"})]})}var I=function(){var e={headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Authorization","x-access-token":localStorage.getItem("token"),Authorization:"Bearer "+localStorage.getItem("token")}},t=p().get(F+"/delivery/retour/list?current_page=1&per_page=500",e),r=p().get(F+"/driver",e);p().all([t,r]).then(p().spread((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];h(t[0].data.data.data),R(t[1].data.data)}))).catch((function(e){console.error(e)}))};(0,i.useEffect)((function(){I()}),[]);var M=[{dataField:"colis.index_colis",text:"Num\xe9ro colis",headerFormatter:D,filter:(0,y.DN)(),sort:!0},{dataField:"colis.provider.username",text:"Expiditeur",formatter:function(e,t){return(0,w.jsx)("div",{className:"d-flex align-items-center",children:(0,w.jsxs)("a",{href:"#/",onClick:function(e){return e.preventDefault()},className:"font-weight-bold text-black",title:"...",children:[t.colis.provider.username," :"," ",t.colis.provider.phone_number]})})},headerFormatter:D,filter:(0,y.DN)()},{dataField:"colis.name_complete",text:"Client",headerFormatter:D,filter:(0,y.DN)()},{dataField:"colis.address",text:"addresse de client",headerFormatter:D,filter:(0,y.DN)(),style:{textAlign:"center"},formatter:function(e,t){return(0,w.jsxs)("div",{children:["".concat(t.colis.gouvernorat," ")," ",(0,w.jsx)("br",{})," ","".concat(t.colis.address)]})}},{dataField:"colis.phone_number",text:"N. de t\xe9l\xe9phone",headerFormatter:D,filter:(0,y.DN)()},{dataField:"colis.phone_number",text:"action",style:{textAlign:"center"},formatter:function(e,t,r,n){return(0,w.jsx)(c.Z,{children:(0,w.jsxs)(d.Z,{as:"select",id:"{driver}",onChange:function(e){return H(e.target.value,t.colis.id)},custom:!0,children:[(0,w.jsx)("option",{children:"S\xe9lectionner un chauffeur"}),P.map((function(e,t){return(0,w.jsx)("option",{className:" badge badge-info",value:e.id,children:e.username},e.id)}))]})})},attrs:function(e,t,r,n){console.log("hello")}},{dataField:"colis.phone_number",text:"Dipstch colis livraison",style:{textAlign:"center"},formatter:function(e,t,r,n){return(0,w.jsx)(c.Z,{children:(0,w.jsxs)(d.Z,{as:"select",id:"{driver}",onChange:function(e){return B(e.target.value,t.colis.id)},custom:!0,children:[(0,w.jsx)("option",{children:"S\xe9lectionner un chauffeur"}),P.map((function(e,t){return(0,w.jsx)("option",{className:" badge badge-info",value:e.id,children:e.username},e.id)}))]})})},attrs:function(e,t,r,n){console.log("hello")}},{dataField:"colis.name_complete",text:"qrcode",formatter:function(e,t){return(0,w.jsx)(Z.Z,{url:t.colis.id})}}],B=function(e,t){var r={headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Authorization","x-access-token":localStorage.getItem("token"),Authorization:"Bearer "+localStorage.getItem("token")}};p().put(F+"/colis/from_retour_final/to_retour_provisoire/"+t,{driver:e},r).then((function(e){alert("add Succefull"),console.log("response.data",e.data),I()})).catch((function(e){console.log(e)}))},H=function(e,t){var r={headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Authorization","x-access-token":localStorage.getItem("token"),Authorization:"Bearer "+localStorage.getItem("token")}};p().put(F+"/colis/to_retour",{driver:e,colis:[t]},r).then((function(e){alert("add Succefull"),console.log("response.data",e.data),I()})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){}),[q]),(0,w.jsx)(A.Z,{children:(0,w.jsx)(f.Z,{children:(0,w.jsxs)(x.Z,{children:[(0,w.jsxs)("button",{className:"btn btn-info",onClick:function(){return I()},children:[" ",(0,w.jsx)("span",{className:"fa fa-refresh"}),"  Actualiser"]}),(0,w.jsx)("hr",{}),(0,w.jsx)(v.Z,{defaultActiveKey:"home",children:(0,w.jsxs)(g.Z,{eventKey:"home",title:"En attente",children:[q.display&&(0,w.jsx)(C.Z,{message:q.message,design:q.type,showit:q.display}),(0,w.jsxs)(o.Z,{className:"card-box mb-4",children:[(0,w.jsxs)("div",{className:"card-header",children:[(0,w.jsxs)(u.Z,{title:(0,w.jsx)("span",{className:"fa fa-download"}),variant:"success",id:"dropdown-variants-success",onSelect:function(e){return function(e,t){if("csv"===e){var r=t.map((function(e){return{"Num\xe9ro colis":e.colis.index_colis,"Exp\xe9diteur":e.colis.provider.username,"N. de t\xe9l\xe9phone Exp\xe9diteur":e.colis.provider.phone_number,"client ":e.colis.name_complete,"N. de t\xe9l\xe9phone":e.colis.phone_number,gouvernorat:e.colis.gouvernorat,addresse:e.colis.city+":"+e.colis.address,prix:e.colis.price,"type paiment":e.colis.payment_mode,"type d'envoi":e.colis.type_envoi,"date created":S()(e.colis.created_at).format("DD/MM/YYYY, HH:mm")}})),n={Sheets:{data:_.utils.json_to_sheet(r)},SheetNames:["data"]},i=_.write(n,{bookType:"xlsx",type:"array"}),o=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});N.saveAs(o,"fileName.xlsx")}else alert("save pdf")}(e,r)},children:[(0,w.jsx)(m.Z.Item,{eventKey:"pdf",children:"pdf"}),(0,w.jsx)(m.Z.Item,{eventKey:"csv",children:"excel "})]},"success"),(0,w.jsx)("div",{className:"card-header--title"}),(0,w.jsx)(a.Z,{className:"card-header--actions",children:(0,w.jsx)(s.Z,{size:"small",color:"primary",className:"text-primary",title:"View details"})})]}),(0,w.jsx)(l.Z,{className:"p-0",children:(0,w.jsx)("div",{className:"table-responsive",children:(0,w.jsx)("div",{className:"table-responsive",style:{height:"2000px"},children:(0,w.jsx)("div",{className:"app-row",children:(0,w.jsx)("div",{className:"app-col-xs-12 app-col-md-12",children:(0,w.jsx)(j.Z,{striped:!0,bordered:!0,hover:!0,variant:"dark",bootstrap4:!0,keyField:"id",data:r,columns:M,pagination:(0,b.ZP)({sizePerPage:15,sizePerPageList:[5,10,15,20,25]}),filter:(0,y.ZP)(),headerClasses:"table thead-light mb-0"})})})})})})]})]})})]})})})}},45279:function(e,t,r){var n=r(87462),i=r(63366),o=r(72791),a=r(52007),s=r.n(a),l=r(46387),c=r(5107),d=r(20070),u=["title","children","bsPrefix","rootCloseEvent","variant","size","menuAlign","menuRole","renderMenuOnMount","disabled","href","id"],m={id:s().any,href:s().string,onClick:s().func,title:s().node.isRequired,disabled:s().bool,menuAlign:d.r,menuRole:s().string,renderMenuOnMount:s().bool,rootCloseEvent:s().string,bsPrefix:s().string,variant:s().string,size:s().string},h=o.forwardRef((function(e,t){var r=e.title,a=e.children,s=e.bsPrefix,m=e.rootCloseEvent,h=e.variant,p=e.size,f=e.menuAlign,x=e.menuRole,v=e.renderMenuOnMount,g=e.disabled,j=e.href,b=e.id,y=(0,i.Z)(e,u);return o.createElement(l.Z,(0,n.Z)({ref:t},y),o.createElement(c.Z,{id:b,href:j,size:p,variant:h,disabled:g,childBsPrefix:s},r),o.createElement(d.Z,{align:f,role:x,renderOnMount:v,rootCloseEvent:m},a))}));h.displayName="DropdownButton",h.propTypes=m,t.Z=h}}]);
//# sourceMappingURL=8522.e5a9744a.chunk.js.map