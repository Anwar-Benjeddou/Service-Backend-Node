{"version":3,"file":"static/js/6540.bd124f2b.chunk.js","mappings":"0WAyBIA,EAAaC,EAAQ,MAARA,GA0VjB,UArVA,WACI,OAAkCC,EAAAA,EAAAA,UAAS,IAA3C,eAAOC,EAAP,KAAkBC,EAAlB,KACA,GAAwCF,EAAAA,EAAAA,UAAS,IAAjD,eAAOG,EAAP,KACA,GADA,MAC8BH,EAAAA,EAAAA,UAAS,KAAvC,eAAOI,EAAP,KAAaC,EAAb,KACA,GAAkCL,EAAAA,EAAAA,UAAS,IAA3C,0BAIAM,EAAAA,EAAAA,YAAU,WACNC,MAGD,IACH,IAAMA,EAAoB,WAEtB,IAAMC,EAAS,CACXC,QAAS,CACL,eAAgB,mBAChB,+BAAgC,gBAChC,iBAAkBC,aAAaC,QAAQ,SACvC,cAAiB,UAAYD,aAAaC,QAAQ,WAGpDC,EAAMd,EAAa,2DAEzBe,IAAAA,IACSD,EAAKJ,GACTM,MAAK,SAACC,GAAD,OAAcA,EAASX,QAC5BU,MAAK,SAACV,GACHY,QAAQC,IAAIC,OAAOC,OAAOf,EAAKA,KAAKA,OACX,IAArBA,EAAKA,KAAKgB,OAEVlB,EAAagB,OAAOC,OAAOf,EAAKA,KAAKA,OAGrCF,EAAa,OAIlBmB,OAAM,WAELL,QAAQC,IAAI,SAsElBK,EAAY,CACdC,gBAAiB,oBACjBC,SAAU,SAACC,EAAKC,GAAN,aACN,4BAEI,iCAAO,kBAAMC,MAAO,CAAEC,MAAO,QAASC,WAAY,OAAQC,UAAW,UAA9D,wBAAuF,IAAvF,OAAP,IAA4GL,EAAIM,MAAMC,MAAtH,cAEA,0BACI,kBAAML,MAAO,CAAEC,MAAO,QAASC,WAAY,OAAQC,UAAW,UAA9D,kCAAiG,SAAjG,OADJ,cACwHL,EAAIM,aAD5H,aACwH,EAAWE,aADnI,QAIA,iDAC0BR,EAAIM,MAAMG,mBAK5CC,kBAAkB,GA+ChBC,EAAU,CACZ,CACIC,UAAW,oBACXC,KAAMC,EAAAA,EAAAA,EAAO,mBAKjB,CACIF,UAAW,sBACXC,KAAMC,EAAAA,EAAAA,EAAO,gBAIjB,CACIF,UAAW,gBACXC,KAAMC,EAAAA,EAAAA,EAAO,WACbZ,MAAO,CAAEG,UAAW,UAGpBU,UAAW,SAACC,EAAMhB,GAEd,OADAT,QAAQC,IAAIQ,IACJ,qCAASA,EAAIM,MAAMW,YAAnB,UAAmC,kBAAnC,cAAiDjB,EAAIM,MAAMY,MAA3D,eAAwElB,EAAIM,MAAMa,cAKlG,CACIP,UAAW,qBACXC,KAAMC,EAAAA,EAAAA,EAAO,iBAGjB,CACIF,UAAW,oBACXC,KAAMC,EAAAA,EAAAA,EAAO,gBAIjB,CACIF,UAAW,cACXC,KAAMC,EAAAA,EAAAA,EAAO,SACbC,UAAW,SAACC,EAAMhB,GAEd,OADAT,QAAQC,IAAIQ,IACJ,qCAASA,EAAIM,MAAMC,MAAnB,UAA6B,kBAA7B,cAA2CP,EAAIM,MAAME,mBAKrE,CACII,UAAW,mBACXC,KAAMC,EAAAA,EAAAA,EAAO,cAKjB,CACIF,UAAW,mBACXC,KAAMC,EAAAA,EAAAA,EAAO,WACbZ,MAAO,CAAEG,UAAW,UACpBU,UAxGW,SAACC,EAAMhB,EAAKC,EAAUmB,GACrC,OACI,0BACI,SAAC,IAAD,CAAMC,GAAI,2BAA6BrB,EAAIM,MAAMgB,GAAjD,UACI,UAAC,IAAD,CACIC,QAAQ,UACRC,QAAS,kBAAMjC,QAAQC,IAAI,YAF/B,UAIK,KACD,iBAAMiC,UAAU,yBAkJpC,OA5CA5C,EAAAA,EAAAA,YAAU,WAEN,IAAM6C,EAASlD,EAAUmD,QAAO,gBAAGL,EAAH,EAAGA,GAAH,OAAY5C,EAAakD,SAASN,MAElE1C,EAAc8C,KAEf,CAAChD,KAwCA,SAAC,IAAD,CAAM+C,UAAU,gBAAhB,UACI,SAAC,IAAD,WACI,gBAAKA,UAAU,UAAf,UACI,iBAAKA,UAAU,8BAAf,UAOK9C,EAAKgB,OAAS,IACX,SAAC,IAAD,CAAgBkC,SAAUlD,KAO9B,SAAC,IAAD,CACImD,SAAO,EACPC,UAAQ,EACRC,OAAK,EACLT,QAAQ,OACR1B,UAAWA,EACXoC,YAAY,EACZC,SAAS,KACTvD,KAAMH,EACNmC,QAASA,EACTwB,YAAYC,EAAAA,EAAAA,IAAkB,CAC1BC,YAAa,GACbC,gBAAiB,CAAC,EAAG,GAAI,GAAI,GAAI,MAErCX,QAAQY,EAAAA,EAAAA,MACRC,cAAc,4BAGlB,SAAC,EAAAC,QAAD,CAAS9D,KAAMH,EAAf,UAA0B,SAAC,IAAD,CACtB2B,MAAM,UACNoB,QAAQ","sources":["Routes/Provider/Pickup/List.pickup.Depot.js"],"sourcesContent":["\nimport React, { Fragment, useState, useEffect } from 'react';\n\n/* import Facture from '../Facture/Facture' */\n\n//import { PageTitle } from '../../layout-components';\n\nimport { Button } from \"react-bootstrap\";\nimport axios from \"axios\"\nimport Card from \"../../../App/components/MainCard\";\nimport ModificationModal from './Modal.Modification'\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport ResponsiveContainer from \"react-responsive-widget\";\nimport filterFactory from \"react-bootstrap-table2-filter\";\nimport { CSVLink } from \"react-csv\";\nimport { Link } from \"react-router-dom\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport TicketAdd from '../../Ticket/Ticket.add'\nimport TemplatePrint from '../../Template/TemplatePrint'\nimport TemplatePrints from '../../Template/TemplatePrints'\nimport { confirmAlert } from \"react-confirm-alert\";\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import\nimport jwtDecode from \"jwt-decode\";\nimport i18n from './../../../i18n';\n\nvar urlbackend = require('../../../env/env')();\n\n\n\n\nfunction ListPickupDepot() {\n    const [tableshow, settableshow] = useState([])\n    const [selectedRows, setSelectedRows] = useState([])\n    const [data, setDataToShow] = useState([])\n    const [providerr, setproviderr] = useState([])\n\n    /* const [selectedRows1,setSelectedRows] = useState([]) */\n\n    useEffect(() => {\n        getdata_listpocup()\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n\n    }, [])\n    const getdata_listpocup = () => {\n\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Headers': 'Authorization',\n                \"x-access-token\": localStorage.getItem('token'),\n                'Authorization': 'Bearer ' + localStorage.getItem('token'),\n            },\n        };\n        const url = urlbackend + \"/provider/pickup/list/depot?current_page=1&per_page=1000\";\n\n        axios\n            .get(url, config)\n            .then((response) => response.data)\n            .then((data) => {\n                console.log(Object.values(data.data.data))\n                if (data.data.length !== 0) {\n                   // settableshow(data.data.data)\n                    settableshow(Object.values(data.data.data))\n                } else {\n\n                    settableshow([])\n                }\n\n                //  console.log(data);\n            }).catch(() => {\n\n                console.log('e')\n            })\n\n    }\n\n\n    /*  const ImprimeSelectedData =()=>{\n       console.log(selectedRows);\n       const result = tableshow.filter(({id}) => selectedRows.includes(id))\n       console.log(result)\n       setDataToShow(result)\n   \n   \n     } */\n    const Annulationcolis = (cell, row, rowIndex, formatExtraData) => {\n        return (\n            <div>\n\n                <Button\n                    variant=\"danger\"\n                    onClick={() => Annulercolis(row.id)}\n                >\n                    {\" \"}\n                    <span className=\"fa fa-trash\"></span>\n                </Button>\n\n\n\n            </div>\n        );\n    };\n\n    const Annulercolis = (id) => {\n        confirmAlert({\n            title: \"Annuler livraison\",\n            message: \"confirmer la suppression dÃ©finitive?\",\n            buttons: [\n                {\n                    label: \"Oui\",\n                    onClick: () => {\n                        axios\n                            .put(urlbackend + \"/delete/pickup/\" + id)\n                            .then((res) => {\n                                console.log(res);\n                                getdata_listpocup()\n                                //window.location.reload(true);\n                            }).catch((e) => {\n                                console.log(e)\n                            })\n                    },\n                },\n                {\n                    label: \"Non\",\n                    onClick: null,\n                },\n            ],\n        });\n        /*  */\n    };\n\n    /*  const showDataToImprimer = ()=>{\n       return (\n         <div>\n           <TemplatePrint2 Template={data}  > </TemplatePrint2>\n         </div>\n   \n       );\n     }\n   \n    */\n    const expandRow = {\n        parentClassName: 'parent-expand-foo',\n        renderer: (row, rowIndex) => (\n            <div>\n\n                <p>    <span style={{ color: \"black\", fontWeight: 'bold', textAlign: \"center\" }}>  {`prix :`}{\" \"} </span> {row.colis.price} (TND) </p>\n\n                <p >\n                    <span style={{ color: \"black\", fontWeight: 'bold', textAlign: \"center\" }}>  {`Mode de paiment `}{\"     :\"} </span> {row.colis?.payment_mode} </p>\n\n\n                <p>\n                    Description produit: {row.colis.designation}\n                </p>\n\n            </div>\n        ),\n        onlyOneExpanding: true,\n    };\n    const linkFollow = (cell, row, rowIndex, formatExtraData) => {\n        return (\n            <div>\n                <Link to={\"/history/colis/provider/\" + row.colis.id}>\n                    <Button\n                        variant=\"success\"\n                        onClick={() => console.log(\"not yet\")}\n                    >\n                        {\" \"}\n                        <span className=\"fa fa-file\"></span>\n                    </Button>\n\n                </Link>\n\n            </div>\n        );\n    };\n    const linkFollowtick = (cell, row, rowIndex, formatExtraData) => {\n        return (\n            <div>\n\n                <TicketAdd colis={row.colis} />\n\n            </div>\n        );\n    };\n    const impression = (cell, row, rowIndex, formatExtraData) => {\n        return (\n            <div>\n\n                <TemplatePrint Template={row} providerinfo={providerr} > </TemplatePrint>\n\n            </div>\n        );\n    };\n    const Modifier = (cell, row, rowIndex, formatExtraData) => {\n        return (\n            <div>\n\n                <ModificationModal colismodifier={row?.colis} reloaddata={() => getdata_listpocup()}  > </ModificationModal>\n\n            </div>\n        );\n    };\n\n    const columns = [\n        {\n            dataField: \"colis.index_colis\",\n            text: i18n.t('package-number'),\n\n\n        },\n\n        {\n            dataField: \"colis.name_complete\",\n            text: i18n.t('client-name'),\n\n\n        },\n        {\n            dataField: \"colis.address\",\n            text: i18n.t('address'),\n            style: { textAlign: \"center\" },\n\n\n            formatter: (cell, row) => {\n                console.log(row);\n                return (<div>{`${row.colis.gouvernorat} `} <br></br> {`${row.colis.city}`}: {`${row.colis.address}`}</div>);\n            }\n            // formatter: this.linkFollow,\n\n        },\n        {\n            dataField: \"colis.phone_number\",\n            text: i18n.t('phone-number'),\n\n        },\n        {\n            dataField: \"colis.designation\",\n            text: i18n.t('designation'),\n\n\n        },\n        {\n            dataField: \"colis.price\",\n            text: i18n.t('price'),\n            formatter: (cell, row) => {\n                console.log(row);\n                return (<div>{`${row.colis.price} `} <br></br> {`${row.colis.payment_mode}`}</div>);\n            }\n\n        },\n\n        {\n            dataField: \"colis.type_envoi\",\n            text: i18n.t('send-type'),\n\n        },\n\n\n        {\n            dataField: \"colis.type_envoi\",\n            text: i18n.t('history'),\n            style: { textAlign: \"center\" },\n            formatter: linkFollow,\n\n        },\n      \n    ];\n  \n\n    useEffect(() => {\n        //console.log(selectedRows);\n        const result = tableshow.filter(({ id }) => selectedRows.includes(id))\n        // console.log(result)\n        setDataToShow(result)\n\n    }, [selectedRows])\n\n\n    const selecthandel = (row, isSelect, e) => {\n\n        if (isSelect) {\n            setSelectedRows((prevSelected) => [...prevSelected, row.id]);\n        } else {\n            setSelectedRows((prevSelected) => prevSelected.filter((x) => x !== row.id));\n        }\n    }\n\n\n    const handleOnSelectAll = (isSelect, rows) => {\n\n        if (isSelect) {\n            setDataToShow(rows)\n        } else {\n            setDataToShow([])\n        }\n    }\n\n    const selectRow = {\n        mode: 'checkbox',\n        /* clickToExpand: true, */\n        clickToSelect: true,\n        style: { background: '#c8e6c9' },\n        /*  selected: selectedRows, */\n        onSelect: selecthandel,\n        onSelectAll: handleOnSelectAll\n\n    };\n\n    /**\n   * function render: return virtual dom\n   * @param props {string } include the list of props if that change\n  \n   */\n    return (\n\n        <Card className=\"card-box mb-8\">\n            <ResponsiveContainer>\n                <div className=\"app-row\">\n                    <div className=\"app-col-xs-12 app-col-md-12\">\n                        {/*    <Button\n        variant=\"success\"\n        onClick={() =>showDataToImprimer()}\n      > showDataToImprimer\n      </Button> */}\n                        {/* {data.length} */}\n                        {data.length > 0 &&\n                            <TemplatePrints Template={data} />\n                        }\n                        {/* <Button\n        variant=\"success\"\n        onClick={() =>ImprimeSelectedData()}\n      > Select Rows\n      </Button> */}\n                        <BootstrapTable\n                            striped\n                            bordered\n                            hover\n                            variant=\"dark\"\n                            expandRow={expandRow}\n                            bootstrap4={true}\n                            keyField=\"id\"\n                            data={tableshow}\n                            columns={columns}\n                            pagination={paginationFactory({\n                                sizePerPage: 25,\n                                sizePerPageList: [5, 10, 15, 20, 25],\n                            })}\n                            filter={filterFactory()}\n                            headerClasses=\"table thead-light mb-0\"\n                        ></BootstrapTable>\n\n                        <CSVLink data={tableshow}><Button\n                            color=\"primary\"\n                            variant=\"contained\"\n\n                        >\n\n                        </Button>\n\n                        </CSVLink>\n\n\n                    </div>\n                </div>\n            </ResponsiveContainer>\n        </Card>\n\n    );\n}\nexport default ListPickupDepot;"],"names":["urlbackend","require","useState","tableshow","settableshow","selectedRows","data","setDataToShow","useEffect","getdata_listpocup","config","headers","localStorage","getItem","url","axios","then","response","console","log","Object","values","length","catch","expandRow","parentClassName","renderer","row","rowIndex","style","color","fontWeight","textAlign","colis","price","payment_mode","designation","onlyOneExpanding","columns","dataField","text","i18n","formatter","cell","gouvernorat","city","address","formatExtraData","to","id","variant","onClick","className","result","filter","includes","Template","striped","bordered","hover","bootstrap4","keyField","pagination","paginationFactory","sizePerPage","sizePerPageList","filterFactory","headerClasses","CSVLink"],"sourceRoot":""}