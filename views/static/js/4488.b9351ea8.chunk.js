"use strict";(self.webpackChunksubdomaine=self.webpackChunksubdomaine||[]).push([[4488],{54488:function(e,t,r){r.r(t),r.d(t,{default:function(){return N}});var a=r(29439),o=r(72791),n=r(89743),i=r(2677),l=r(78695),s=r(74569),c=r.n(s),d=r(36161),u=r(92746),f=(r(58988),r(74387)),h=r(43360),x=r(38780),g=r(45987),p=r(93433),v=r(1413),m=r(62591),b=r(2002),Z=(r(77632),r(12657)),j=r(80184),y=["mode"],k=["mode"],S=r(24245)(),C=function(e){var t=(0,o.useState)([]),r=(0,a.Z)(t,2),n=r[0],i=r[1],l=(0,o.useState)([]),s=(0,a.Z)(l,2),d=s[0],u=s[1],f=(0,o.useState)([]),x=(0,a.Z)(f,2),C=x[0],z=x[1],F=[{dataField:"colis.index_colis",text:"Num colis",headerStyle:{backgroundColor:"#adaeb0",fontWeight:"bold",fontSize:"18px"},clickToSelect:!1,sort:!0},{dataField:"colis.lot",text:"Num colis",headerStyle:{backgroundColor:"#adaeb0",fontWeight:"bold",fontSize:"18px"}},{dataField:"colis.name_complete",text:"client",headerStyle:{backgroundColor:"#adaeb0",fontWeight:"bold",fontSize:"18px"}},{dataField:"colis.gouvernorat",text:"gouvernorat",headerStyle:{backgroundColor:"#adaeb0",fontWeight:"bold",fontSize:"18px"}},{dataField:"colis.gouvernorat",text:"Status",headerStyle:{backgroundColor:"#adaeb0",fontWeight:"bold",fontSize:"18px"},formatter:function(e,t){return 1===t.delivery_status?"Livr\xe9":"retour"}},{dataField:"colis.price",text:"Prix",headerStyle:{backgroundColor:"#adaeb0",fontWeight:"bold",fontSize:"18px"},style:function(e,t,r,a){return{backgroundColor:"#c8e6c9",fontWeight:"bold",fontSize:"18px"}}},{dataField:"prixlivara",text:"Prix Livraison",headerStyle:{backgroundColor:"#adaeb0",fontWeight:"bold",fontSize:"18px"},style:function(e,t,r,a){return 0==t.prixlivara?{textAlign:"center",backgroundColor:"#ff00ff",fontWeight:"bold",fontSize:"18px"}:{textAlign:"center",backgroundColor:"#c8e6c9",fontWeight:"bold",fontSize:"18px"}}},{dataField:"id",headerStyle:{backgroundColor:"#adaeb0",fontWeight:"bold",fontSize:"18px"},text:"supprimer",formatter:function(e,t,r,a){return(0,j.jsxs)(h.Z,{variant:"danger",onClick:function(){return N(t.id)},children:[" ",(0,j.jsx)("span",{className:"fa fa-trash"})]})},style:{textAlign:"center"}}],N=function(e){var t={headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Authorization","x-access-token":localStorage.getItem("token"),Authorization:"Bearer "+localStorage.getItem("token")}};c().delete(S+"/facture/"+e,t).then((function(e){alert("ok"),A()})).catch((function(){console.log("no")}))},A=function(){console.log(e.providerget);var t={headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Authorization","x-access-token":localStorage.getItem("token"),Authorization:"Bearer "+localStorage.getItem("token")}};c().get(S+"/facture/"+e.providerget,t).then((function(e){console.log("this respon list",e.data);var t=e.data.data.rows1.map((function(t){return e.data.data.scale[t.colis.gouvernorat]?(0,v.Z)((0,v.Z)({},t),{},{prixlivara:e.data.data.scale[t.colis.gouvernorat]*t.colis.lot}):(0,v.Z)((0,v.Z)({},t),{},{prixlivara:0})})),r=e.data.data.rows2.map((function(t){return t.delivery_status,(0,v.Z)((0,v.Z)({},t),{},{prixlivara:e.data.data.scale.RETOUR*t.colis.lot})}));i(t.concat(r)),z(e.data.data.scale),console.log(C),console.log("scale",e.data.data.scale)})).catch((function(e){console.log(e)}))};(0,o.useEffect)((function(){A()}),[]);var P=function(){for(var e=0,t=0,r=d.length;t<r;t++)e+=parseFloat(d[t].frais_livraision);return e},_=function(){for(var e=0,t=0,r=d.length;t<r;t++)1===d[t].statuslivraison&&(e+=parseFloat(d[t].price));return e};return(0,j.jsxs)("div",{style:{padding:"20px"},children:[(0,j.jsxs)(m.Z,{children:[(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{style:{fontWeight:"bold",fontSize:"18px"},children:"Frais livraison"}),(0,j.jsx)("td",{children:d.length&&P()})]}),(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{style:{fontWeight:"bold",fontSize:"18px",width:"20%"},children:"nombre de colis"}),(0,j.jsx)("td",{children:d.length})]}),(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{style:{fontWeight:"bold",fontSize:"18px"},children:"valeur Colis"}),(0,j.jsx)("td",{children:d.length&&_()})]}),(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{style:{fontWeight:"bold",fontSize:"18px"},children:" Remboursement"}),(0,j.jsx)("td",{children:d.length&&_()-P()})]})]}),0!==d.length&&(0,j.jsxs)(h.Z,{style:{float:"right"},variant:"secondary",onClick:function(){return function(){console.log({provider:e.providerget,frais_total:P(),total_livraision:_(),nb_colis:d.length,factures:d});var t={headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Authorization","x-access-token":localStorage.getItem("token"),Authorization:"Bearer "+localStorage.getItem("token")}};c().put(S+"/facture/to_paid",{provider:e.providerget,frais_total:P(),total_livraision:_(),nb_colis:d.length,factures:d},t).then((function(e){console.log("this respon list",e.data),u([]),A()})).catch((function(e){console.log(e)}))}()},children:[" ",(0,j.jsx)("span",{className:"fa fa-tags "}),"pr\xe9 facture"]}),(0,j.jsx)(b.Z,{keyField:"id",data:n,columns:F,headerClasses:"header-class",cellEdit:(0,Z.ZP)({mode:"click"}),selectRow:{mode:"checkbox",clickToSelect:!1,clickToEdit:!0,bgColor:"#d1e0f3",onSelect:function(e,t){u(t?function(t){return[].concat((0,p.Z)(t),[{id_facture:e.id,frais_livraision:e.prixlivara,price:e.colis.price,statuslivraison:e.delivery_status}])}:function(t){return t.filter((function(t){return t.id_facture!==e.id}))})},hideSelectAll:!0,selectionRenderer:function(e){var t=e.mode,r=(0,g.Z)(e,y);return(0,j.jsx)("div",{children:(0,j.jsx)("input",{type:t,checked:r.checked,disabled:r.disabled})})},selectionHeaderRenderer:function(e){var t=e.mode,r=(0,g.Z)(e,k);return(0,j.jsx)("div",{children:(0,j.jsx)("input",{type:t,checked:r.checked})})}}})]})};var z=function(e){var t=(0,o.useState)(!1),r=(0,a.Z)(t,2),n=r[0],i=r[1],l=function(){return i(!1)};return(0,o.useEffect)((function(){console.log("props.provider")}),[]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(h.Z,{variant:"secondary",onClick:function(){return i(!0)},children:[" ",(0,j.jsx)("span",{className:"fa fa-file"})]}),(0,j.jsxs)(x.Z,{dialogClassName:"my-modal",show:n,onHide:l,children:[(0,j.jsx)(x.Z.Header,{closeButton:!0,children:(0,j.jsx)(x.Z.Title,{children:" "})}),(0,j.jsx)(x.Z.Body,{children:(0,j.jsx)(C,{providerget:e.provider})}),(0,j.jsx)(x.Z.Footer,{children:(0,j.jsx)(h.Z,{variant:"secondary",onClick:l,children:"Close"})})]})]})},F=r(24245)();var N=function(){var e=(0,o.useState)([]),t=(0,a.Z)(e,2),r=t[0],s=t[1];function h(e,t,r){r.sortElement;var a=r.filterElement;return(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[a,e.text]})}var x=[{dataField:"lastname",text:"Expideteur",headerFormatter:h,formatter:function(e,t){return(0,j.jsxs)("div",{children:["".concat(t.lastname," ")," ","".concat(t.firstname)]})},filter:(0,u.DN)()},{dataField:"username",text:"username",headerFormatter:h,filter:(0,u.DN)()},{dataField:"phone_number",text:"Telphone",headerFormatter:h,filter:(0,u.DN)()},{dataField:"lastname",text:"code_fiscal",headerFormatter:h,formatter:function(e,t){return(0,j.jsxs)("div",{children:["".concat(t.company," ")," ","".concat(t.code_fiscal)]})},filter:(0,u.DN)()},{dataField:"colis.name_complete",text:"Simulation facture",style:{textAlign:"center"},formatter:function(e,t){return(0,j.jsx)("div",{children:(0,j.jsx)(z,{provider:t.id})})}}];return(0,o.useEffect)((function(){var e={headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Authorization","x-access-token":localStorage.getItem("token"),Authorization:"Bearer "+localStorage.getItem("token")}};c().get(F+"/provider",e).then((function(e){console.log("this respon list",e.data),s(e.data.data)})).catch((function(e){console.log(e)}))}),[]),(0,j.jsx)(f.Z,{children:(0,j.jsx)(n.Z,{children:(0,j.jsx)(i.Z,{children:(0,j.jsxs)(l.Z,{children:[(0,j.jsx)(l.Z.Header,{children:(0,j.jsx)(l.Z.Title,{as:"h5",children:"ListProviderdFactures    "})}),(0,j.jsx)(l.Z.Body,{children:(0,j.jsx)(b.Z,{striped:!0,bordered:!0,hover:!0,variant:"dark",bootstrap4:!0,keyField:"id",data:r,columns:x,pagination:(0,d.ZP)({sizePerPage:15,sizePerPageList:[5,10,15,20,25]}),filter:(0,u.ZP)(),headerClasses:"table thead-light mb-0"})})]})})})})}},78695:function(e,t,r){r.d(t,{Z:function(){return F}});var a=r(87462),o=r(63366),n=r(60654),i=r.n(n),l=r(72791),s=r(10162),c=r(71923),d=r(27472),u=r(87338),f=["bsPrefix","className","variant","as"],h=l.forwardRef((function(e,t){var r=e.bsPrefix,n=e.className,c=e.variant,d=e.as,u=void 0===d?"img":d,h=(0,o.Z)(e,f),x=(0,s.vE)(r,"card-img");return l.createElement(u,(0,a.Z)({ref:t,className:i()(c?x+"-"+c:x,n)},h))}));h.displayName="CardImg",h.defaultProps={variant:null};var x=h,g=["bsPrefix","className","bg","text","border","body","children","as"],p=(0,d.Z)("h5"),v=(0,d.Z)("h6"),m=(0,c.Z)("card-body"),b=(0,c.Z)("card-title",{Component:p}),Z=(0,c.Z)("card-subtitle",{Component:v}),j=(0,c.Z)("card-link",{Component:"a"}),y=(0,c.Z)("card-text",{Component:"p"}),k=(0,c.Z)("card-header"),S=(0,c.Z)("card-footer"),C=(0,c.Z)("card-img-overlay"),z=l.forwardRef((function(e,t){var r=e.bsPrefix,n=e.className,c=e.bg,d=e.text,f=e.border,h=e.body,x=e.children,p=e.as,v=void 0===p?"div":p,b=(0,o.Z)(e,g),Z=(0,s.vE)(r,"card"),j=(0,l.useMemo)((function(){return{cardHeaderBsPrefix:Z+"-header"}}),[Z]);return l.createElement(u.Z.Provider,{value:j},l.createElement(v,(0,a.Z)({ref:t},b,{className:i()(n,Z,c&&"bg-"+c,d&&"text-"+d,f&&"border-"+f)}),h?l.createElement(m,null,x):x))}));z.displayName="Card",z.defaultProps={body:!1},z.Img=x,z.Title=b,z.Subtitle=Z,z.Body=m,z.Link=j,z.Text=y,z.Header=k,z.Footer=S,z.ImgOverlay=C;var F=z},62591:function(e,t,r){var a=r(87462),o=r(63366),n=r(60654),i=r.n(n),l=r(72791),s=r(10162),c=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],d=l.forwardRef((function(e,t){var r=e.bsPrefix,n=e.className,d=e.striped,u=e.bordered,f=e.borderless,h=e.hover,x=e.size,g=e.variant,p=e.responsive,v=(0,o.Z)(e,c),m=(0,s.vE)(r,"table"),b=i()(n,m,g&&m+"-"+g,x&&m+"-"+x,d&&m+"-striped",u&&m+"-bordered",f&&m+"-borderless",h&&m+"-hover"),Z=l.createElement("table",(0,a.Z)({},v,{className:b,ref:t}));if(p){var j=m+"-responsive";return"string"===typeof p&&(j=j+"-"+p),l.createElement("div",{className:j},Z)}return Z}));t.Z=d},58988:function(){}}]);
//# sourceMappingURL=4488.b9351ea8.chunk.js.map