"use strict";(self.webpackChunksubdomaine=self.webpackChunksubdomaine||[]).push([[9989],{34952:function(e,t,r){r.r(t);var n=r(29439),o=r(72791),a=r(88749),i=r(41971),s=r(51695),l=r(42953),c=(r(43360),r(99410)),d=r(74292),u=r(45279),m=r(46387),f=r(74569),h=r.n(f),p=r(89743),v=r(2677),x=r(59151),g=r(3637),j=r(2002),b=(r(98472),r(36161)),y=r(92746),N=(r(1235),r(58826)),Z=r(64802),_=r(58484),A=r(74387),k=r(627),C=(r(71628),r(72426)),w=r.n(C),S=r(80184),E=r(24245)();t.default=function(){var e=(0,o.useState)([]),t=(0,n.Z)(e,2),r=t[0],f=t[1],C=(0,o.useState)({display:!1,type:"success",message:null}),F=(0,n.Z)(C,2),z=F[0],D=(F[1],(0,o.useState)([])),P=(0,n.Z)(D,2),M=P[0],I=P[1];function B(e,t,r){var n=r.sortElement,o=r.filterElement;return(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[o,e.text,n,(0,S.jsx)("span",{className:"fa fa-filter"})]})}var T=function(){var e={headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Authorization","x-access-token":localStorage.getItem("token"),Authorization:"Bearer "+localStorage.getItem("token")}},t=h().get(E+"/delivery/retour/list?current_page=1&per_page=500",e),r=h().get(E+"/driver",e);h().all([t,r]).then(h().spread((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];f(t[0].data.data.data),I(t[1].data.data)}))).catch((function(e){console.error(e)}))};(0,o.useEffect)((function(){T()}),[]);var H=[{dataField:"id",text:"Num\xe9ro colis",headerFormatter:B,filter:(0,y.DN)(),sort:!0},{dataField:"colis.provider.username",text:"Expiditeur",formatter:function(e,t){var r,n;return(0,S.jsx)("div",{className:"d-flex align-items-center",children:(0,S.jsxs)("a",{href:"#/",onClick:function(e){return e.preventDefault()},className:"font-weight-bold text-black",title:"...",children:[null===(r=t.colis)||void 0===r?void 0:r.provider.username," :"," ",null===(n=t.colis)||void 0===n?void 0:n.provider.phone_number]})})},headerFormatter:B,filter:(0,y.DN)()},{dataField:"colis.name_complete",text:"Client",headerFormatter:B,filter:(0,y.DN)()},{dataField:"colis.address",text:"addresse de client",headerFormatter:B,filter:(0,y.DN)(),style:{textAlign:"center"},formatter:function(e,t){var r,n;return(0,S.jsxs)("div",{children:["".concat(null===(r=t.colis)||void 0===r?void 0:r.gouvernorat," ")," ",(0,S.jsx)("br",{})," ","".concat(null===(n=t.colis)||void 0===n?void 0:n.address)]})}},{dataField:"colis.phone_number",text:"N. de t\xe9l\xe9phone",headerFormatter:B,filter:(0,y.DN)()},{dataField:"colis.phone_number",text:"action",style:{textAlign:"center"},formatter:function(e,t,r,n){return(0,S.jsx)(c.Z,{children:(0,S.jsxs)(d.Z,{as:"select",id:"{driver}",onChange:function(e){var r;return K(e.target.value,null===(r=t.colis)||void 0===r?void 0:r.id)},custom:!0,children:[(0,S.jsx)("option",{children:"S\xe9lectionner un chauffeur"}),M.map((function(e,t){return(0,S.jsx)("option",{className:" badge badge-info",value:e.id,children:e.username},e.id)}))]})})},attrs:function(e,t,r,n){console.log("hello")}},{dataField:"colis.phone_number",text:"Dipstch colis livraison",style:{textAlign:"center"},formatter:function(e,t,r,n){return(0,S.jsx)(c.Z,{children:(0,S.jsxs)(d.Z,{as:"select",id:"{driver}",onChange:function(e){var r;return R(e.target.value,null===(r=t.colis)||void 0===r?void 0:r.id)},custom:!0,children:[(0,S.jsx)("option",{children:"S\xe9lectionner un chauffeur"}),M.map((function(e,t){return(0,S.jsx)("option",{className:" badge badge-info",value:e.id,children:e.username},e.id)}))]})})},attrs:function(e,t,r,n){console.log("hello")}},{dataField:"colis.name_complete",text:"qrcode",formatter:function(e,t){var r;return(0,S.jsx)(N.Z,{url:null===(r=t.colis)||void 0===r?void 0:r.id})}}],R=function(e,t){var r={headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Authorization","x-access-token":localStorage.getItem("token"),Authorization:"Bearer "+localStorage.getItem("token")}};h().put(E+"/colis/from_retour_final/to_retour_provisoire/"+t,{driver:e},r).then((function(e){alert("add Succefull"),console.log("response.data",e.data),T()})).catch((function(e){console.log(e)}))},K=function(e,t){var r={headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"Authorization","x-access-token":localStorage.getItem("token"),Authorization:"Bearer "+localStorage.getItem("token")}};h().put(E+"/colis/to_retour/to_provider_direct",{driver:e,colis:[t]},r).then((function(e){alert("add Succefull"),console.log("response.data",e.data),T()})).catch((function(e){console.log(e)}))};return(0,o.useEffect)((function(){}),[z]),(0,S.jsx)(A.Z,{children:(0,S.jsx)(p.Z,{children:(0,S.jsxs)(v.Z,{children:[(0,S.jsxs)("button",{className:"btn btn-info",onClick:function(){return T()},children:[" ",(0,S.jsx)("span",{className:"fa fa-refresh"}),"  Actualiser"]}),(0,S.jsx)("hr",{}),(0,S.jsx)(x.Z,{defaultActiveKey:"home",children:(0,S.jsxs)(g.Z,{eventKey:"home",title:"En attente",children:[z.display&&(0,S.jsx)(k.Z,{message:z.message,design:z.type,showit:z.display}),(0,S.jsxs)(a.Z,{className:"card-box mb-4",children:[(0,S.jsxs)("div",{className:"card-header",children:[(0,S.jsxs)(u.Z,{title:(0,S.jsx)("span",{className:"fa fa-download"}),variant:"success",id:"dropdown-variants-success",onSelect:function(e){return function(e,t){if("csv"===e){var r=t.map((function(e){return{"Num\xe9ro colis":e.colis.index_colis,"Exp\xe9diteur":e.colis.provider.username,"N. de t\xe9l\xe9phone Exp\xe9diteur":e.colis.provider.phone_number,"client ":e.colis.name_complete,"N. de t\xe9l\xe9phone":e.colis.phone_number,gouvernorat:e.colis.gouvernorat,addresse:e.colis.city+":"+e.colis.address,prix:e.colis.price,"type paiment":e.colis.payment_mode,"type d'envoi":e.colis.type_envoi,"date created":w()(e.colis.created_at).format("DD/MM/YYYY, HH:mm")}})),n={Sheets:{data:_.utils.json_to_sheet(r)},SheetNames:["data"]},o=_.write(n,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Z.saveAs(a,"fileName.xlsx")}else alert("save pdf")}(e,r)},children:[(0,S.jsx)(m.Z.Item,{eventKey:"pdf",children:"pdf"}),(0,S.jsx)(m.Z.Item,{eventKey:"csv",children:"excel "})]},"success"),(0,S.jsx)("div",{className:"card-header--title"}),(0,S.jsx)(i.Z,{className:"card-header--actions",children:(0,S.jsx)(s.Z,{size:"small",color:"primary",className:"text-primary",title:"View details"})})]}),(0,S.jsx)(l.Z,{className:"p-0",children:(0,S.jsx)("div",{className:"table-responsive",children:(0,S.jsx)("div",{className:"table-responsive",style:{height:"2000px"},children:(0,S.jsx)("div",{className:"app-row",children:(0,S.jsx)("div",{className:"app-col-xs-12 app-col-md-12",children:(0,S.jsx)(j.Z,{striped:!0,bordered:!0,hover:!0,variant:"dark",bootstrap4:!0,keyField:"id",data:r,columns:H,pagination:(0,b.ZP)({sizePerPage:15,sizePerPageList:[5,10,15,20,25]}),filter:(0,y.ZP)(),headerClasses:"table thead-light mb-0"})})})})})})]})]})})]})})})}},45279:function(e,t,r){var n=r(87462),o=r(63366),a=r(72791),i=r(52007),s=r.n(i),l=r(46387),c=r(5107),d=r(20070),u=["title","children","bsPrefix","rootCloseEvent","variant","size","menuAlign","menuRole","renderMenuOnMount","disabled","href","id"],m={id:s().any,href:s().string,onClick:s().func,title:s().node.isRequired,disabled:s().bool,menuAlign:d.r,menuRole:s().string,renderMenuOnMount:s().bool,rootCloseEvent:s().string,bsPrefix:s().string,variant:s().string,size:s().string},f=a.forwardRef((function(e,t){var r=e.title,i=e.children,s=e.bsPrefix,m=e.rootCloseEvent,f=e.variant,h=e.size,p=e.menuAlign,v=e.menuRole,x=e.renderMenuOnMount,g=e.disabled,j=e.href,b=e.id,y=(0,o.Z)(e,u);return a.createElement(l.Z,(0,n.Z)({ref:t},y),a.createElement(c.Z,{id:b,href:j,size:h,variant:f,disabled:g,childBsPrefix:s},r),a.createElement(d.Z,{align:p,role:v,renderOnMount:x,rootCloseEvent:m},i))}));f.displayName="DropdownButton",f.propTypes=m,t.Z=f}}]);
//# sourceMappingURL=9989.10d76384.chunk.js.map